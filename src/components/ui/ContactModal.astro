---
// Contact Modal Component - Enhanced UX for email contact
const contactEmail = "alejandrocabralvaldovinos@gmail.com";
---

<div class="contact-modal-overlay" id="contactModal">
  <div class="contact-modal">
    <div class="modal-header">
      <h3>Get In Touch</h3>
      <button class="modal-close" id="closeModal" aria-label="Close modal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="modal-content">
      <div class="contact-options">
        <!-- Email Copy Option -->
        <div class="contact-option">
          <div class="option-icon">
            <i class="fas fa-envelope"></i>
          </div>
          <div class="option-content">
            <h4>Email Address</h4>
            <p class="email-display">{contactEmail}</p>
            <div class="option-actions">
              <button class="btn btn-primary" id="copyEmail">
                <i class="fas fa-copy"></i>
                Copy Email
              </button>
              <a href={`mailto:${contactEmail}`} class="btn btn-secondary">
                <i class="fas fa-external-link-alt"></i>
                Open Mail App
              </a>
            </div>
          </div>
        </div>


        <!-- Social Links -->
        <div class="contact-option">
          <div class="option-icon">
            <i class="fas fa-share-alt"></i>
          </div>
          <div class="option-content">
            <h4>Connect on Social</h4>
            <p>Let's connect on professional networks</p>
            <div class="social-links">
              <a href="https://github.com/alcabvaldo" target="_blank" rel="noopener" class="social-btn github">
                <i class="fab fa-github"></i>
                GitHub
              </a>
              <a href="https://www.linkedin.com/in/alejandro-nicolas-cabral-valdovinos-8253a9186/" target="_blank" rel="noopener" class="social-btn linkedin">
                <i class="fab fa-linkedin-in"></i>
                LinkedIn
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    
  </div>
</div>

<style>
  .contact-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition-normal);
  }

  .contact-modal-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  .contact-modal {
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-xl);
    width: 90%;
    max-width: 800px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: var(--shadow-2xl);
    transform: translateY(20px);
    transition: var(--transition-normal);
  }

  .contact-modal-overlay.active .contact-modal {
    transform: translateY(0);
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-xl);
    border-bottom: 1px solid var(--border-light);
  }

  .modal-header h3 {
    margin: 0;
    color: var(--text-primary);
    font-size: var(--font-xl);
    font-weight: var(--font-semibold);
  }

  .modal-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: var(--font-lg);
    cursor: pointer;
    padding: var(--space-sm);
    border-radius: var(--radius-md);
    transition: var(--transition-fast);
  }

  .modal-close:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
  }

  .modal-content {
    padding: var(--space-xl);
  }

  .contact-options {
    display: flex;
    flex-direction: column;
    gap: var(--space-2xl);
  }

  .contact-option {
    display: flex;
    gap: var(--space-lg);
    padding: var(--space-xl);
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    border-radius: var(--radius-lg);
  }

  .option-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    background: var(--color-primary);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: var(--font-lg);
  }

  .option-content {
    flex: 1;
  }

  .option-content h4 {
    margin: 0 0 var(--space-sm) 0;
    color: var(--text-primary);
    font-weight: var(--font-semibold);
  }

  .option-content p {
    margin: 0 0 var(--space-md) 0;
    color: var(--text-secondary);
  }

  .email-display {
    font-family: monospace;
    background: var(--bg-secondary);
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-light);
    font-size: var(--font-sm);
    color: var(--color-primary) !important;
  }

  .option-actions {
    display: flex;
    gap: var(--space-md);
    flex-wrap: wrap;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius-md);
    text-decoration: none;
    font-weight: var(--font-medium);
    font-size: var(--font-sm);
    transition: var(--transition-fast);
    border: none;
    cursor: pointer;
  }

  .btn-primary {
    background: var(--color-primary);
    color: white;
  }

  .btn-primary:hover {
    background: var(--color-primary-dark, var(--color-secondary));
    transform: translateY(-1px);
  }

  .btn-secondary {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border-light);
  }

  .btn-secondary:hover {
    background: var(--bg-tertiary);
    border-color: var(--color-primary);
  }


  /* Social Links */
  .social-links {
    display: flex;
    gap: var(--space-md);
    flex-wrap: wrap;
  }

  .social-btn {
    display: inline-flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius-md);
    text-decoration: none;
    font-weight: var(--font-medium);
    font-size: var(--font-sm);
    transition: var(--transition-fast);
    border: 1px solid var(--border-light);
    background: var(--bg-secondary);
    color: var(--text-primary);
  }

  .social-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  .social-btn.github:hover {
    border-color: #333;
    background: #333;
    color: white;
  }

  .social-btn.linkedin:hover {
    border-color: #0077b5;
    background: #0077b5;
    color: white;
  }


  /* Responsive Design */
  @media screen and (max-width: 768px) {
    .contact-modal {
      width: 95%;
      margin: var(--space-md);
    }

    .contact-option {
      flex-direction: column;
      text-align: center;
    }

    .option-actions,
    .form-actions {
      justify-content: center;
    }

    .social-links {
      justify-content: center;
    }
  }

  @media screen and (max-width: 480px) {
    .modal-header,
    .modal-content {
      padding: var(--space-lg);
    }

    .contact-option {
      padding: var(--space-lg);
    }

    .option-actions,
    .social-links {
      flex-direction: column;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('contactModal');
    const closeBtn = document.getElementById('closeModal');
    const copyBtn = document.getElementById('copyEmail');

    // Close modal function
    function closeModal() {
      modal?.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Open modal function (to be called from other components)
    window.openContactModal = function() {
      modal?.classList.add('active');
      document.body.style.overflow = 'hidden';
    };

    // Close modal events
    closeBtn?.addEventListener('click', closeModal);
    
    modal?.addEventListener('click', function(e) {
      if (e.target === modal) {
        closeModal();
      }
    });

    // ESC key to close
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && modal?.classList.contains('active')) {
        closeModal();
      }
    });

    // Copy email functionality
    copyBtn?.addEventListener('click', async function() {
      const email = 'alejandrocabralvaldovinos@gmail.com';
      
      try {
        await navigator.clipboard.writeText(email);
        
        // Visual feedback
        const originalText = this.innerHTML;
        this.innerHTML = '<i class="fas fa-check"></i> Copied!';
        this.classList.add('btn-success');
        
        setTimeout(() => {
          this.innerHTML = originalText;
          this.classList.remove('btn-success');
        }, 2000);
      } catch (err) {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = email;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        // Visual feedback
        const originalText = this.innerHTML;
        this.innerHTML = '<i class="fas fa-check"></i> Copied!';
        setTimeout(() => {
          this.innerHTML = originalText;
        }, 2000);
      }
    });

  });
</script>